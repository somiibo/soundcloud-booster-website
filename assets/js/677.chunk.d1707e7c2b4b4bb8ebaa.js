"use strict";(self.webpackChunkultimate_jekyll=self.webpackChunkultimate_jekyll||[]).push([[677,7172,9707],{677:(t,e,c)=>{c.r(e),c.d(e,{buildStateFromRaw:()=>i,handleBillingCycleChange:()=>r,hideDiscountMessages:()=>g,hideError:()=>u,initializeCheckoutUI:()=>y,showDiscountError:()=>h,showDiscountLoading:()=>d,showDiscountSuccess:()=>p,showError:()=>s,updateAllUI:()=>n,updatePaymentButtonVisibility:()=>l});var o=c(9707),a=c(7172);function i(t){const e=(0,a.calculatePrices)(o.raw),c=o.raw.product?.price_monthly?12*o.raw.product.price_monthly:0,i=o.raw.product?.price_annually||0,n=c>0?Math.round((c-i)/c*100):0,r="monthly"===o.raw.billingCycle?"monthly":"annually",s=new Date,u="monthly"===o.raw.billingCycle?30:365;s.setDate(s.getDate()+u);const l=s.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),d=t.auth().getUser();o.state.checkout.product.name=o.raw.product?.name||"Loading...",o.state.checkout.product.description=o.raw.product?.description||"Loading product details...",o.state.checkout.product.isSubscription=o.raw.product?.is_subscription||!1,o.state.checkout.pricing.monthlyPrice=o.raw.product?.price_monthly?`$${o.raw.product.price_monthly.toFixed(2)}`:"$--",o.state.checkout.pricing.annualMonthlyRate=o.raw.product?.price_annually?`$${(o.raw.product.price_annually/12).toFixed(2)}`:"$--",o.state.checkout.pricing.savingsBadge=n>0?`Save ${n}%`:"",o.state.checkout.pricing.showSavingsBadge=n>0,o.state.checkout.pricing.billingCyclePaymentText=o.raw.product?"monthly"===o.raw.billingCycle?`$${o.raw.product.price_monthly?.toFixed(2)||"--"} monthly`:`$${o.raw.product.price_annually?.toFixed(2)||"--"} annually`:"$-- monthly",o.state.checkout.pricing.productPrice=e.displayPrice||"$--",o.state.checkout.pricing.subtotal=e.subtotal?`$${e.subtotal.toFixed(2)}`:"$--",o.state.checkout.pricing.total=null!==e.total?`$${e.total.toFixed(2)}`:"$--",o.state.checkout.pricing.recurringAmount=e.recurring?`$${e.recurring.toFixed(2)}`:"$--",o.state.checkout.pricing.recurringPeriod=r,o.state.checkout.pricing.showTerms=o.raw.product?.is_subscription||!1,o.state.checkout.pricing.termsText=o.raw.product?.is_subscription&&o.raw.product?`Your ${r} subscription will start today and renew on ${l} for $${e.recurring?.toFixed(2)||"--"} plus applicable tax. Cancel anytime.`:"";const p=o.raw.product?.has_free_trial||!1;o.state.checkout.trial.show=p&&(o.raw.product?.is_subscription||!1),o.state.checkout.trial.hasFreeTrial=p&&(o.raw.product?.is_subscription||!1)&&0===e.total,o.state.checkout.trial.message=p?`Start your ${o.raw.product?.trial_days||7}-day free trial today!`:"",o.state.checkout.trial.discountAmount=p&&e.trialDiscountAmount?e.trialDiscountAmount.toFixed(2):"0.00",o.state.checkout.discount.hasDiscount=o.raw.discountPercent>0,o.state.checkout.discount.percent=o.raw.discountPercent>0?`${o.raw.discountPercent}%`:"",o.state.checkout.discount.amount=e.discountAmount?e.discountAmount.toFixed(2):"0.00",o.state.auth.user.email=d?.email||""}function n(t){i(t),console.log("ðŸ”„ Updating checkout bindings with data:",o.state),t.bindings().update(o.state)}function r(t,e){t&&t!==o.raw.billingCycle&&(o.raw.billingCycle=t),n(e)}function s(t,e){o.state.checkout.error.show=!0,o.state.checkout.error.message=t,e.bindings().update(o.state)}function u(t){o.state.checkout.error.show=!1,o.state.checkout.error.message="",t.bindings().update(o.state)}function l(t){const e=t.getAvailablePaymentMethods();o.state.checkout.paymentMethods.card=t.isPaymentMethodAvailable("card"),o.state.checkout.paymentMethods.paypal=t.isPaymentMethodAvailable("paypal"),o.state.checkout.paymentMethods.applePay=t.isPaymentMethodAvailable("apple-pay"),o.state.checkout.paymentMethods.googlePay=t.isPaymentMethodAvailable("google-pay"),o.state.checkout.paymentMethods.crypto=t.isPaymentMethodAvailable("crypto"),console.log("Payment methods set in state. Available methods:",e.map(t=>t.id))}function d(t,e){o.state.checkout.discount.loading=t,o.state.checkout.discount.success=!1,o.state.checkout.discount.error=!1,e.bindings().update(o.state)}function p(t,e){o.state.checkout.discount.loading=!1,o.state.checkout.discount.success=!0,o.state.checkout.discount.error=!1,o.state.checkout.discount.successMessage=t||"Discount applied",i(e),e.bindings().update(o.state)}function h(t,e){o.state.checkout.discount.loading=!1,o.state.checkout.discount.success=!1,o.state.checkout.discount.error=!0,o.state.checkout.discount.errorMessage=t||"Invalid discount code",e.bindings().update(o.state)}function g(t){o.state.checkout.discount.loading=!1,o.state.checkout.discount.success=!1,o.state.checkout.discount.error=!1,t.bindings().update(o.state)}function y(){console.log("ðŸš€ Initializing checkout UI")}},7172:(t,e,c)=>{c.r(e),c.d(e,{calculatePrices:()=>a});var o=c(9707);function a(t=o.raw){if(!t.product)return{subtotal:0,discountAmount:0,trialDiscountAmount:0,total:0,recurring:0,displayPrice:"$--"};let e;const c=t.product.is_subscription||!1,a=t.product.has_free_trial||!1;e=c?"monthly"===t.billingCycle?t.product.price_monthly||0:t.product.price_annually||0:t.product.price||0;const i=e,n=i*t.discountPercent/100,r=i-n;let s,u=0;a&&c?(u=r,s=0):s=r;const l=r;let d;if(c){const e="monthly"===t.billingCycle?"/mo":"/yr";d=`$${r.toFixed(2)}${e}`}else d=`$${r.toFixed(2)}`;return{subtotal:i,discountAmount:n,trialDiscountAmount:u,total:s,recurring:l,displayPrice:d}}},9707:(t,e,c)=>{c.r(e),c.d(e,{config:()=>o,getPaymentIds:()=>n,raw:()=>a,state:()=>i});const o={discountCodes:{FLASH20:20,SAVE10:10,WELCOME15:15},siteConfig:null},a={product:null,billingCycle:"annually",discountPercent:0,apiKeys:null,checkoutId:null,formData:null,paymentMethod:"card"},i={checkout:{product:{name:"Loading...",description:"Loading product details...",isSubscription:!1},pricing:{monthlyPrice:"$--",annualMonthlyRate:"$--",savingsBadge:"",showSavingsBadge:!1,billingCyclePaymentText:"$-- monthly",productPrice:"$--",subtotal:"$--",total:"$--",recurringAmount:"$--",recurringPeriod:"annually",showTerms:!1,termsText:""},trial:{show:!1,hasFreeTrial:!1,message:"",discountAmount:"0.00"},discount:{loading:!1,success:!1,error:!1,hasDiscount:!1,percent:"",amount:"0.00",successMessage:"Discount applied",errorMessage:"Invalid discount code"},paymentMethods:{card:!1,paypal:!1,applePay:!1,googlePay:!1,crypto:!1},error:{show:!1,message:""}},auth:{user:{email:""}}};function n(){if(!a.product?._raw?.pricing)return{};const t="monthly"===a.billingCycle?a.product._raw.pricing.monthly:a.product._raw.pricing.annually;return{stripePriceId:t.stripePriceId,stripeProductId:t.stripeProductId,paypalPlanId:t.paypalPlanId,chargebeePlanId:t.chargebeePlanId}}}}]);