"use strict";(self.webpackChunkultimate_jekyll=self.webpackChunkultimate_jekyll||[]).push([[8337],{8337:(t,e,n)=>{n.r(e),n.d(e,{init:()=>s,loadData:()=>i});let a=null;function s(t){a=t,function(){const t=document.getElementById("copy-referral-code-btn");t&&t.addEventListener("click",r)}()}function i(t){t&&(function(t){const e=document.getElementById("referral-code-input");if(e)if(t){const n=window.location.origin;e.value=`${n}?ref=${t}`}else e.value="No referral link available"}(t.affiliate?.code),function(t){const e=document.getElementById("total-referrals"),n=document.getElementById("recent-referrals"),a=document.getElementById("referrals-badge"),s=document.getElementById("referrals-list");let i=t||[];if("true"===new URLSearchParams(window.location.search).get("_test_prefill")){console.log("Adding fake referral data for testing");const t=function(){const t=Date.now(),e=864e5;return[{uid:"user_k9m2n8p4q1r7",timestamp:t-72e5,timestampUNIX:Math.floor((t-72e5)/1e3)},{uid:"user_x3y7z2a5b9c6",timestamp:t-288e5,timestampUNIX:Math.floor((t-288e5)/1e3)},{uid:"user_t4u8i2o6p1a5",timestamp:t-e,timestampUNIX:Math.floor((t-e)/1e3)},{uid:"user_f7g1h5j9k3l8",timestamp:t-3*e,timestampUNIX:Math.floor((t-3*e)/1e3)},{uid:"user_q2w6e1r5t9y4",timestamp:t-7*e,timestampUNIX:Math.floor((t-7*e)/1e3)},{uid:"user_m8n2b6v1c5x9",timestamp:t-14*e,timestampUNIX:Math.floor((t-14*e)/1e3)},{uid:"user_a3s7d1f5g9h4",timestamp:t-25*e,timestampUNIX:Math.floor((t-25*e)/1e3)},{uid:"user_z9x5c1v7b3n8",timestamp:t-35*e,timestampUNIX:Math.floor((t-35*e)/1e3)},{uid:"user_p6o2i8u4y1t5",timestamp:t-45*e,timestampUNIX:Math.floor((t-45*e)/1e3)},{uid:"user_l1k9j7h5g3f2",timestamp:t-60*e,timestampUNIX:Math.floor((t-60*e)/1e3)},{uid:"user_e4r8t2y6u1i5",timestamp:t-90*e,timestampUNIX:Math.floor((t-90*e)/1e3)},{uid:"user_w7q1a5s9d3f6",timestamp:t-120*e,timestampUNIX:Math.floor((t-120*e)/1e3)}]}();i=[...i,...t]}if(!i||!Array.isArray(i)||0===i.length)return e&&(e.textContent="0"),n&&(n.textContent="0"),a&&(a.textContent="0"),void(s&&(s.innerHTML='\n        <div class="text-center text-muted py-3">\n          No referrals yet. Share your code to get started!\n        </div>\n      '));const r=i.length,o=new Date,l=new Date(o.getFullYear(),o.getMonth(),1).getTime(),m=i.filter(t=>(t.timestamp||1e3*t.timestampUNIX)>=l).length;e&&(e.textContent=r.toString()),n&&(n.textContent=m.toString()),a&&(a.textContent=r.toString());const c=[...i].sort((t,e)=>{const n=t.timestamp||1e3*t.timestampUNIX||0;return(e.timestamp||1e3*e.timestampUNIX||0)-n});if(s)if(0===c.length)s.innerHTML='\n        <div class="text-center text-muted py-3">\n          No referrals yet. Share your code to get started!\n        </div>\n      ';else{const t=c.map((t,e)=>{const n=t.timestamp||1e3*t.timestampUNIX,a=n?new Date(n):null,s=a?function(t){return t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}(a):"Unknown date",i=a?function(t){return t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}(a):"";return`\n          <div class="list-group-item px-0">\n            <div class="d-flex justify-content-between align-items-center">\n              <div>\n                <div class="d-flex align-items-center">\n                  <span class="badge bg-secondary me-2">#${c.length-e}</span>\n                  <div>\n                    <strong class="font-monospace small">${t.uid||"Unknown User"}</strong>\n                    <div class="text-muted small">${s}${i?` at ${i}`:""}</div>\n                  </div>\n                </div>\n              </div>\n              <div class="text-end">\n                ${function(t){if(!t)return'<small class="text-muted">Unknown</small>';const e=Date.now()-t;if(e<6e4)return'<small class="text-success">Just now</small>';if(e<36e5){const t=Math.floor(e/6e4);return`<small class="text-muted">${t} min${t>1?"s":""} ago</small>`}if(e<864e5){const t=Math.floor(e/36e5);return`<small class="text-muted">${t} hour${t>1?"s":""} ago</small>`}if(e<6048e5){const t=Math.floor(e/864e5);return`<small class="text-muted">${t} day${t>1?"s":""} ago</small>`}if(e<2592e6){const t=Math.floor(e/6048e5);return`<small class="text-muted">${t} week${t>1?"s":""} ago</small>`}const n=Math.floor(e/2592e6);if(n<12)return`<small class="text-muted">${n} month${n>1?"s":""} ago</small>`;const a=Math.floor(n/12);return`<small class="text-muted">${a} year${a>1?"s":""} ago</small>`}(n)}\n              </div>\n            </div>\n          </div>\n        `}).join("");s.innerHTML=t}}(t.affiliate?.referrals))}async function r(){const t=document.getElementById("referral-code-input"),e=document.getElementById("copy-referral-code-btn");if(t&&t.value&&"No referral link available"!==t.value)try{await a.utilities().clipboardCopy(t);const n=e.querySelector(".button-text"),s=n.textContent;n.textContent="Copied!",e.classList.remove("btn-primary"),e.classList.add("btn-success"),setTimeout(()=>{n.textContent=s,e.classList.remove("btn-success"),e.classList.add("btn-primary")},2e3)}catch(t){console.error("Failed to copy referral link:",t),a.utilities().showNotification("Failed to copy referral link","danger")}else a.utilities().showNotification("No referral link to copy","warning")}}}]);