"use strict";(self.webpackChunkultimate_jekyll=self.webpackChunkultimate_jekyll||[]).push([[909,1058,6005],{909:(t,e,o)=>{o.r(e),o.d(e,{getCompleteConfirmationBindings:()=>r,initializeConfirmationUI:()=>i,updateAllUI:()=>a});var n=o(1058);function r(){return n.state}function a(t){const e=r();console.log("ðŸ”„ Updating confirmation bindings with data:",e),t.bindings().update(e)}function i(){console.log("ðŸš€ Initializing confirmation UI"),n.state.confirmation.loaded=!1}},1058:(t,e,o)=>{o.r(e),o.d(e,{state:()=>n});const n={confirmation:{order:{id:"Loading...",productName:"Product",total:"$0.00",currency:"USD"},subscription:{show:!1,hasFreeTrial:!1,billingCycle:"",infoText:""},loaded:!1}}},6005:(t,e,o)=>{o.r(e),o.d(e,{default:()=>i});var n=o(1058),r=o(909);let a=null;const i=(t,e)=>new Promise(async function(e){return a=t.webManager,await a.dom().ready(),(0,r.initializeConfirmationUI)(),function(){const t=new URLSearchParams(window.location.search),e=t.get("order_id")||t.get("transaction_id")||`ORD-${Date.now()}-${Math.floor(1e3*Math.random())}`,o=t.get("product_id")||t.get("product"),i=t.get("product_name"),c=parseFloat(t.get("amount")||t.get("total")||0),l=t.get("currency")||"USD",d=t.get("frequency")||t.get("billing_cycle"),s=t.get("payment_method"),u="true"===t.get("trial"),m="monthly"===d?"monthly":"annually"===d?"annually":"";let p="";d&&(p=u?`Free Trial Active! Your trial period has begun. You'll be charged ${m} after the trial ends.`:`Your ${m} subscription is now active. You'll be charged automatically each ${"monthly"===d?"month":"annually"===d?"year":""}.`),n.state.confirmation.order.id=e,n.state.confirmation.order.productName=i||o||"Product",n.state.confirmation.order.total=`$${c.toFixed(2)}`,n.state.confirmation.order.currency=l,n.state.confirmation.subscription.show=!!d,n.state.confirmation.subscription.hasFreeTrial=u,n.state.confirmation.subscription.billingCycle=m,n.state.confirmation.subscription.infoText=p,n.state.confirmation.loaded=!0,(0,r.updateAllUI)(a),function(t){const e=new URLSearchParams(window.location.search);if(!("true"===e.get("track")))return void console.log("Tracking parameter not present or false, skipping tracking");(function(t){gtag("event","purchase",{transaction_id:t.orderId,value:t.total,currency:t.currency,items:[{item_id:t.productId,item_name:t.productName||t.productId,item_category:t.billingCycle?"subscription":"one-time",item_variant:t.billingCycle,price:t.total,quantity:1}]}),fbq("track","Purchase",{content_ids:[t.productId],content_name:t.productName||t.productId,content_type:"product",currency:t.currency,value:t.total,num_items:1}),ttq.track("CompletePayment",{content_id:t.productId,content_type:"product",content_name:t.productName||t.productId,price:t.total,quantity:1,currency:t.currency,value:t.total}),console.log("Tracked purchase event:",{orderId:t.orderId,productId:t.productId,total:t.total,currency:t.currency})})(t),e.delete("track");const o=e.toString()?`${window.location.pathname}?${e.toString()}`:window.location.pathname;window.history.replaceState({},document.title,o),console.log("Removed track parameter from URL to prevent duplicate tracking");const n=JSON.parse(localStorage.getItem("trackedPurchases")||"[]");n.includes(t.orderId)||(n.push(t.orderId),n.length>50&&n.shift(),localStorage.setItem("trackedPurchases",JSON.stringify(n)))}({orderId:e,productId:o,productName:i,total:c,currency:l,billingCycle:d,paymentMethod:s,hasFreeTrial:u})}(),await async function(){try{await a.dom().loadScript({src:"https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"}),window.confetti({particleCount:100,spread:70,origin:{y:.6},colors:["#5b6fff","#8b5cf6","#22d3ee","#34d399","#fb923c"]}),setTimeout(()=>{window.confetti({particleCount:50,angle:60,spread:55,origin:{x:0},colors:["#5b6fff","#8b5cf6","#22d3ee"]})},250),setTimeout(()=>{window.confetti({particleCount:50,angle:120,spread:55,origin:{x:1},colors:["#34d399","#fb923c","#5b6fff"]})},400)}catch(t){console.log("Confetti library failed to load:",t)}}(),e()})}}]);