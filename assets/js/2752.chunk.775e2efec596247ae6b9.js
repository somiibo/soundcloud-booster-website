"use strict";(self.webpackChunkultimate_jekyll=self.webpackChunkultimate_jekyll||[]).push([[2752],{2752:(e,t,n)=>{n.r(t),n.d(t,{init:()=>i,loadData:()=>l});let s=null,a=null;async function i(e){s=e,function(){const e=document.getElementById("upgrade-plan-btn"),t=document.getElementById("manage-plan-btn");e&&e.addEventListener("click",()=>{window.location.href="/pricing"}),t&&t.addEventListener("click",()=>{window.location.href="/pricing"})}()}async function l(e,t){e&&(a=t,function(e){const t=e.subscription,n=document.getElementById("current-plan-name"),s=document.getElementById("plan-status"),i=document.getElementById("upgrade-plan-btn"),l=document.getElementById("manage-plan-btn");if(n){const e=t.product||"basic";let s="Free";a?.products?.[e]?s=a.products[e].name||e:"basic"!==e&&(s=e.charAt(0).toUpperCase()+e.slice(1)),n.textContent=s}if(document.querySelectorAll(".plan-action-btn").forEach(e=>e.classList.add("d-none")),s)if("suspended"===t.status||t.paymentIssue?.hasIssue){if(s.className="badge bg-danger",s.textContent="Payment Issue",l&&l.classList.remove("d-none"),t.paymentIssue?.message){const e=document.getElementById("billing-details");e&&(e.innerHTML=`\n            <div class="alert alert-danger mb-3">\n              <strong>Payment Failed:</strong> ${t.paymentIssue.message}\n            </div>\n          `)}}else if(t.cancellation?.requested&&"active"===t.status){const e=t.cancellation.effectiveAt;if(s.className="badge bg-warning",s.textContent="Cancelling",e){const t=Math.ceil((1e3*e-Date.now())/864e5);t>0&&(s.textContent+=` (${t} days left)`)}l&&l.classList.remove("d-none")}else if("active"===t.status||!0===t.access)s.className="badge bg-success",s.textContent="Active",l&&l.classList.remove("d-none");else if("trialing"===t.status){const e=t.trial?.endedAt||t.trial?.expires?.timestamp;if(s.className="badge bg-info",s.textContent="Trial",e){const t=Math.ceil((new Date(e)-new Date)/864e5);t>0&&(s.textContent+=` (${t} days left)`)}l&&i.classList.remove("d-none")}else"cancelled"===t.status?(s.className="badge bg-secondary",s.textContent="Cancelled",i&&i.classList.remove("d-none")):(s.className="badge bg-secondary",s.textContent="Basic",i&&i.classList.remove("d-none"))}(e),function(e){const t=e.subscription;if(t.billing&&!t.paymentIssue?.hasIssue){const e=document.getElementById("billing-details");if(e){const n=t.billing.nextBillingDate,s=t.billing.amount,a=t.billing.currency||"usd",i=t.frequency||t.billing.interval;let l="";if(n&&s){const e=new Date(1e3*n).toLocaleDateString(),c=new Intl.NumberFormat("en-US",{style:"currency",currency:a.toUpperCase()}).format(s/100);l=t.cancellation?.requested?`\n            <div class="alert alert-warning mb-3">\n              <strong>Subscription ending:</strong> Your subscription will end on ${e}.\n              You'll continue to have access until then.\n            </div>\n          `:`\n            <p class="mb-1"><strong>Next billing:</strong> ${e}</p>\n            <p class="mb-1"><strong>Amount:</strong> ${c} / ${i}</p>\n          `}e.innerHTML=l}}}(e),function(e){const t=e.subscription||{},n=document.getElementById("usage-metrics-container");if(!n)return;const s=t.product||"basic",i=a?.products?.[s],l=i?.limits||{};if(n.innerHTML="",!i||!l||0===Object.keys(l).length)return void(n.innerHTML='<div class="text-muted">Usage tracking not available for this plan</div>');let o=e.usage||{};Object.entries(l).forEach(([e,t])=>{const s=(o[e]||{}).period||0,a=Math.min(100,Math.round(s/t*100));let i="bg-success";a>=80?i="bg-danger":a>=50&&(i="bg-warning");const l=function(e){return{requests:"API Requests",tokens:"Tokens",storage:"Storage",bandwidth:"Bandwidth",users:"Users",projects:"Projects"}[e]||e.charAt(0).toUpperCase()+e.slice(1)}(e),r=`\n      <div class="mb-3">\n        <div class="d-flex justify-content-between align-items-center mb-1">\n          <small class="text-muted fw-semibold">${l}</small>\n          <small class="text-muted">${c(e,s)} / ${c(e,t)}</small>\n        </div>\n        <div class="progress" style="height: 20px;">\n          <div class="progress-bar ${i}" role="progressbar"\n               style="width: ${a}%"\n               aria-valuenow="${a}"\n               aria-valuemin="0"\n               aria-valuemax="100">\n            ${a}%\n          </div>\n        </div>\n      </div>\n    `;n.innerHTML+=r}),""===n.innerHTML&&(n.innerHTML='<div class="text-muted">No usage data available</div>')}(e))}function c(e,t){return"storage"===e||"bandwidth"===e?function(e,t=2){if(0===e)return"0 Bytes";const n=t<0?0:t,s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB"][s]}(t):t.toLocaleString()}}}]);