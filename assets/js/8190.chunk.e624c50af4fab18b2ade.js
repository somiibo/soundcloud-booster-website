"use strict";(self.webpackChunkultimate_jekyll=self.webpackChunkultimate_jekyll||[]).push([[8190],{8190:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});let a=null;const o=e=>new Promise(async function(t){a=e.webManager,await a.dom().ready();try{!function(){function e(){const e=document.querySelector(".admin-iframe-container"),t=(document.querySelector(".page-header"),document.querySelector("#main-content"));if(!e)return;const n=e.getBoundingClientRect().top+window.scrollY,a=t?parseInt(window.getComputedStyle(t).paddingBottom):0,o=window.innerHeight-n-a;e.style.setProperty("height",o+"px","important")}setTimeout(e,50),window.addEventListener("resize",e)}(),await async function(){i=document.getElementById("admin-content-frame"),c=document.querySelector(".sidebar"),i?(i.addEventListener("load",l),c&&c.querySelectorAll("a[href]").forEach(e=>{const t=e.cloneNode(!0);e.parentNode.replaceChild(t,e),t.addEventListener("click",m,!0)}),u(),window.addEventListener("hashchange",function(){console.log("[Admin] Hash changed to:",window.location.hash),u()}),window.addEventListener("message",h),d(i.src)):console.warn("[Admin] No iframe found")}()}catch(e){a.sentry().captureException(new Error("Failed to initialize admin panel",{cause:e}))}return t()});let i=null,c=null,s=null,r=!1;function l(){console.log("[Admin] Iframe loaded, checking URL...");try{d(i.contentWindow.location.href)}catch(e){!function(){const e=document.getElementById("admin-page-breadcrumb"),t=document.getElementById("admin-page-title");if(s)try{const n=new URL(s).hostname.replace("www.","").split(".")[0],a=n.charAt(0).toUpperCase()+n.slice(1);e&&(e.textContent=a),t&&(t.textContent=a)}catch(n){e&&(e.textContent="External"),t&&(t.textContent="External")}const n=s||i.src;if(!c)return;const a=c.querySelectorAll("a[href]");a.forEach(e=>{e.classList.remove("active")}),n&&a.forEach(e=>{const t=e.getAttribute("href");if(t&&t===n){e.classList.add("active");const t=e.closest(".nav-item");t&&t.classList.add("active");const n=e.closest(".dropdown");if(n){const e=n.querySelector(".nav-link");e&&e.classList.add("active")}}})}()}}function d(e){if(!c)return;let t;try{const n=new URL(e);t=n.pathname}catch(e){return}const n=c.querySelectorAll("a[href]");n.forEach(e=>{e.classList.remove("active")}),c.querySelectorAll(".nav-item").forEach(e=>{e.classList.remove("active")}),n.forEach(e=>{const n=e.getAttribute("href");if(!n)return;const a=n.replace(/\/$/,"");if(t.replace(/\/$/,"")===a){e.classList.add("active");const t=e.closest(".nav-item");t&&t.classList.add("active");const n=e.closest(".collapse");if(n){n.classList.add("show");const e=n.id,t=c?c.querySelector(`[data-bs-target="#${e}"]`):null;t&&(t.classList.remove("collapsed"),t.setAttribute("aria-expanded","true"))}const a=e.closest(".dropdown-menu");if(a){a.classList.add("show");const e=a.closest(".dropdown");if(e){const t=e.querySelector(':scope > .nav-link[data-bs-toggle="dropdown"]');t&&(t.classList.add("active"),t.setAttribute("aria-expanded","true"))}}}})}function m(e){const t=e.currentTarget,n=t.getAttribute("href"),a=t.getAttribute("target");if(!n)return;const o=n.startsWith("http://")||n.startsWith("https://")||n.startsWith("//"),l=!o&&(n.includes("/admin")||n.includes("admin"));console.log("[Admin] Link clicked:",{href:n,isExternal:o,isAdmin:l,target:a});let m="parent";switch(l?m="iframe":o?"_self"===a?m="iframe":"_blank"===a?m="new-tab":"_parent"!==a&&a||(m="parent"):m="parent",m){case"iframe":if(e.preventDefault(),e.stopPropagation(),console.log("[Admin] Loading in iframe:",n),s=o?n:null,i.src=n,l&&!r){const e=n.replace(/^.*\/admin\//,"").replace(/\/$/,"");e&&"admin"!==e?(window.location.hash=e,console.log("[Admin] Updated URL hash to:",e)):window.location.hash=""}d(n);const a=t.closest(".dropdown-menu");if(t.closest(".collapse"),a||c.querySelectorAll(".dropdown-menu.show").forEach(e=>{e.classList.remove("show");const t=e.previousElementSibling;t&&t.setAttribute("aria-expanded","false")}),window.innerWidth<768){const e=c?c.querySelector(".navbar-collapse.show"):null;e&&e.classList.remove("show")}break;case"new-tab":console.log("[Admin] Opening in new tab:",n);break;case"parent":console.log("[Admin] Navigating parent window to:",n)}}function u(){const e=window.location.hash.slice(1);if(e){console.log("[Admin] Hash detected:",e);const t="/admin/"+e,n=window.location.pathname.replace(/\/admin.*$/,"")+t,a=c?c.querySelectorAll("a[href]"):[];let o=null;if(a.forEach(e=>{const t=e.getAttribute("href");t&&t.replace(/\/$/,"")===n.replace(/\/$/,"")&&(o=e)}),o){console.log("[Admin] Found matching link for hash, triggering click:",n);const e=o.closest(".collapse");if(e){const t=e.id,n=c?c.querySelector(`[data-bs-target="#${t}"]`):null;n&&!e.classList.contains("show")&&(console.log("[Admin] Opening collapse section before clicking nested link"),n.click())}r=!0,o.click(),r=!1}else console.log("[Admin] No matching sidebar link found, loading URL directly:",n),i.src=n,d(n)}else d(i.src)}function h(e){if(console.log("[Admin] Received message:",e?.data?.command,e.data),e.data&&"string"==typeof e.data.command&&e.data.command.startsWith("uj:admin:")&&"uj:admin:iframe-navigation"===e.data.command&&e.data.payload){d(e.data.payload.url);try{const t=new URL(e.data.payload.url).pathname;if(t.includes("/admin/")){const e=t.replace(/^.*\/admin\//,"").replace(/\/$/,"");e&&"admin"!==e?(window.location.hash=e,console.log("[Admin] Updated URL hash from iframe navigation to:",e)):(t.endsWith("/admin")||t.endsWith("/admin/"))&&(window.location.hash="")}}catch(e){console.error("[Admin] Error parsing iframe navigation URL:",e)}if(e.data.payload.meta){const t=e.data.payload.meta,n=document.getElementById("admin-page-breadcrumb");n&&t.breadcrumb&&(n.textContent=t.breadcrumb);const a=document.getElementById("admin-page-title");a&&t.breadcrumb&&(a.textContent=t.breadcrumb)}}}}}]);