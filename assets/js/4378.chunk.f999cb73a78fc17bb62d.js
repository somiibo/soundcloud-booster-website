"use strict";(self.webpackChunkultimate_jekyll=self.webpackChunkultimate_jekyll||[]).push([[4378],{4378:(t,e,o)=>{function n(t,e){const{webManager:o}=t,n=o.config.exitPopup.config,i="exitPopup.timestamp",a=o.storage().get(i,0);let r=Date.now()-a>=n.timeout;o.dom().ready().then(()=>{document.addEventListener("mouseleave",t=>{r&&t.clientY<=0&&function(){r=!1,o.storage().set(i,Date.now());const t=document.getElementById("modal-exit-popup");if(!t)return void o.sentry().captureException(new Error("Exit popup modal element not found"));if(function(t){const e=t.querySelector(".modal-exit-title");e&&n.title&&(e.textContent=n.title);const o=t.querySelector(".modal-exit-message");o&&n.message&&(o.textContent=n.message);const i=t.querySelector(".modal-exit-offer-title-text");i&&n.offerTitle&&(i.textContent=n.offerTitle);const a=t.querySelector(".modal-exit-offer-description");a&&n.offerDescription&&(a.textContent=n.offerDescription);const r=t.querySelector(".modal-exit-button"),c=t.querySelector(".modal-exit-button-text");if(r&&n.okButton&&(c&&n.okButton.text&&(c.textContent=n.okButton.text),n.okButton.link)){const t=new URL(n.okButton.link,window.location.origin);t.searchParams.set("utm_source","exit-popup"),t.searchParams.set("utm_medium","popup"),t.searchParams.set("utm_campaign",window.location.pathname),r.href=t.toString()}const s=t.querySelector(".modal-exit-dismiss");s&&n.dismissText&&(s.textContent=n.dismissText),t.removeAttribute("hidden")}(t),!window.bootstrap||!window.bootstrap.Modal)return void o.sentry().captureException(new Error("Bootstrap Modal not available for exit popup"));let e;try{e=new window.bootstrap.Modal(t)}catch(t){return void o.sentry().captureException(new Error("Error initializing Bootstrap modal for exit popup",{cause:t}))}try{e.show(),t.addEventListener("shown.bs.modal",()=>{t.classList.add("fade")},{once:!0}),gtag("event","exit_popup_shown",{event_category:"engagement",event_label:n.title,page_path:window.location.pathname}),fbq("trackCustom","ExitPopupShown",{content_name:n.title,page_path:window.location.pathname}),ttq.track("ViewContent",{content_name:"Exit Popup",content_type:n.title});const o=t.querySelector(".modal-exit-button");o&&!o.hasAttribute("data-exit-popup-tracked")&&(o.setAttribute("data-exit-popup-tracked","true"),o.addEventListener("click",()=>{gtag("event","exit_popup_click",{event_category:"engagement",event_label:n.okButton?.text||"OK",destination_url:n.okButton?.link}),fbq("track","Lead",{content_name:"Exit Popup Click",content_category:n.title}),ttq.track("ClickButton",{content_name:"Exit Popup CTA",content_type:n.okButton?.text||"OK"})})),t.addEventListener("hide.bs.modal",()=>{document.activeElement&&t.contains(document.activeElement)&&document.activeElement.blur()},{once:!0}),t.addEventListener("hidden.bs.modal",()=>{gtag("event","exit_popup_dismissed",{event_category:"engagement",event_label:n.title}),fbq("trackCustom","ExitPopupDismissed",{content_name:n.title}),ttq.track("ViewContent",{content_name:"Exit Popup Dismissed",content_type:n.title})},{once:!0})}catch(t){o.sentry().captureException(new Error("Error showing exit popup",{cause:t}))}}()})})}o.d(e,{default:()=>n})}}]);