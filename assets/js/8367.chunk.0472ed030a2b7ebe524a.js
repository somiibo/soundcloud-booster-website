(self.webpackChunkultimate_jekyll=self.webpackChunkultimate_jekyll||[]).push([[6002,8367],{634:()=>{},938:()=>{},2480:()=>{},3005:()=>{},4050:()=>{},5043:()=>{},6600:()=>{},7664:()=>{},8466:()=>{},9978:(e,t,n)=>{"use strict";n.r(t),n.d(t,{init:()=>m,loadData:()=>f,onShow:()=>p});var o=n(2984),c=n(4289),i=n.n(c);let a=null,s=null,r=null,d=new Map;const u=["google","discord","github","twitter","facebook"];function l(){return a.getApiUrl()+"/backend-manager"}async function m(e){a=e}async function f(e,t){e&&(r=e,s=t,h())}function h(){const e=document.getElementById("connections-loading");if(e&&e.classList.add("d-none"),!s)return void(e&&e.classList.remove("d-none"));const t=s?.oauth2||{},n=r?.oauth2||{};console.log("Available OAuth providers:",t),console.log("User connections:",n);let c=!1;u.forEach(e=>{const u=t[e],m=document.getElementById(`connection-${e}`);m&&(u&&!1!==u.enabled?(c=!0,m.classList.remove("d-none"),y(e,n[e],u),function(e){const t=`connection-form-${e}`;if(!document.getElementById(t))return;if(d.has(e))return;const n=new o.A(`#${t}`,{autoDisable:!0,showSpinner:!0});d.set(e,n),n.addEventListener("submit",async e=>{e.preventDefault();const{data:t}=e.detail,o=t.action,c=t.provider;try{if("connect"===o)await async function(e){const t=s?.oauth2?.[e];if(!t||!1===t.enabled)throw new Error("This connection service is not available.");const n=await a.auth().getIdToken(),o=t.scope||[],c=await i()(l(),{method:"POST",timeout:3e4,response:"json",tries:2,body:{authenticationToken:n,command:"user:oauth2",payload:{redirect:!1,provider:e,state:"authorize",scope:o,referrer:window.location.href}}});if(console.log("OAuth connect response:",c),!c.url)throw new Error(c.message||"Failed to get authorization URL");window.location.href=c.url}(c);else if("disconnect"===o){const e=await async function(e){const t=e.charAt(0).toUpperCase()+e.slice(1);if(await new Promise(e=>setTimeout(e,1)),!confirm(`Are you sure you want to disconnect your ${t} account?`))throw new Error("Disconnection cancelled");const n=await a.auth().getIdToken(),o=(s?.oauth2?.[e]||{}).scope||[],c=await i()(l(),{method:"POST",timeout:3e4,response:"json",tries:2,body:{authenticationToken:n,command:"user:oauth2",payload:{redirect:!1,provider:e,state:"deauthorize",scope:o,referrer:window.location.href}}});if(console.log("OAuth disconnect response:",c),c.success)return r.oauth2&&r.oauth2[e]&&delete r.oauth2[e],!0;throw new Error(c.message||"Failed to disconnect")}(c);if(e){n.setFormState("ready");const e=s?.oauth2?.[c];y(c,null,e)}}}catch(e){n.showError(e),n.setFormState("ready")}})}(e)):m.classList.add("d-none"))});const m=document.getElementById("connections-empty");m&&(c?m.classList.add("d-none"):m.classList.remove("d-none"))}function y(e,t,n){const o=document.getElementById(`${e}-connection-status`),c=document.getElementById(`${e}-connection-description`),i=document.getElementById(`connection-form-${e}`),a=i?.querySelector('button[type="submit"]'),s=a?.querySelector(".button-text"),r=i?.querySelector('input[name="action"]'),d=t&&t.identity;if(c){const t={google:"Enable single sign-on with your Google account",discord:"Connect to access Discord community features",github:"Link your GitHub account for repository access",twitter:"Share updates and connect with Twitter",facebook:"Connect your Facebook account for social features"},o=n?.description||t[e]||`Connect your ${e.charAt(0).toUpperCase()+e.slice(1)} account`;c.textContent=o,c.classList.remove("d-none")}if(o)if(d){const e=(u=t)&&u.identity?u.identity.global_name||u.identity.username||u.identity.name||u.identity.email||u.identity.id||"Connected":"Unknown";let n=`Connected: ${e}`;t.updated&&t.updated.timestamp&&(n=`${e} â€¢ ${new Date(t.updated.timestamp).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`),o.textContent=n,o.classList.remove("d-none")}else o.textContent="",o.classList.add("d-none");var u;if(a&&s&&r)if(d){a.classList.remove("btn-primary"),a.classList.add("btn-outline-danger"),s.textContent="Disconnect",r.value="disconnect";const e=a.querySelector(".fa-icon");e&&(e.classList.remove("fa-link"),e.classList.add("fa-unlink"))}else{a.classList.remove("btn-outline-danger"),a.classList.add("btn-primary"),s.textContent="Connect",r.value="connect";const e=a.querySelector(".fa-icon");e&&(e.classList.remove("fa-unlink"),e.classList.add("fa-link"))}}function p(){r&&s&&h()}}}]);