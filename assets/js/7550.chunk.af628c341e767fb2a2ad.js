"use strict";(self.webpackChunkultimate_jekyll=self.webpackChunkultimate_jekyll||[]).push([[7550],{7550:(e,t,n)=>{n.r(t),n.d(t,{init:()=>s,loadData:()=>l});var o=n(2984);let a=null,i=null;function s(e){i=e,a=new o.A("#profile-form",{autoDisable:!0,showSpinner:!0,allowMultipleSubmissions:!0,submitButtonLoadingText:"Saving...",initialState:"loading"}),a.addEventListener("submit",async e=>{const{data:t}=e.detail;try{await async function(e){if(e.personal?.birthday){const t=new Date(e.personal.birthday);e.personal.birthday={timestamp:t.toISOString(),timestampUNIX:Math.floor(t.getTime()/1e3)}}else e.personal.birthday={timestamp:"1970-01-01T00:00:00.000Z",timestampUNIX:0};e.personal?.telephone?.countryCode&&(e.personal.telephone.countryCode=parseInt(e.personal.telephone.countryCode.replace("+",""))||0),e.personal?.telephone?.national&&(e.personal.telephone.national=parseInt(e.personal.telephone.national.replace(/\D/g,""))||0),delete e.auth,console.log("Profile update data:",e);const t=i.auth().getUser(),n=i.firestore().doc(`users/${t.uid}`);await n.set(e,{merge:!0}),console.log("Profile successfully updated in Firestore")}(t),i.utilities().showNotification("Profile updated successfully","success")}catch(e){throw console.error("Failed to update profile:",e),i.utilities().showNotification("Failed to update profile. Please try again.","danger"),e}}),function(){const e=document.getElementById("copy-uid-btn");e&&e.addEventListener("click",r)}()}function l(e,t){if(!e)return;let n="";e.personal?.birthday?.timestamp&&e.personal.birthday.timestampUNIX>0&&(n=new Date(e.personal.birthday.timestamp).toISOString().split("T")[0]);let o="+1";e.personal?.telephone?.countryCode&&(o=`+${e.personal.telephone.countryCode}`);const i={auth:{email:e.auth?.email||t?.email||"",uid:t?.uid||e.auth?.uid||""},personal:{name:{first:e.personal?.name?.first||"",last:e.personal?.name?.last||""},birthday:n,gender:e.personal?.gender||"",location:{country:e.personal?.location?.country||"",region:e.personal?.location?.region||"",city:e.personal?.location?.city||""},telephone:{countryCode:o,national:e.personal?.telephone?.national?.toString()||""}}};a.setValues(i),a.setFormState("ready"),function(e){const t=document.getElementById("profile-join-date");if(!t)return;const n=e?.metadata?.creationTime;if(n){const e=new Date(n).toLocaleDateString("en-US",{month:"long",year:"numeric"});t.textContent=`Member since ${e}`}else t.textContent="Member"}(t),function(e){const t=e?.roles||{},n=e?.subscription||e?.plan;Object.entries({admin:"badge-admin",developer:"badge-coder",moderator:"badge-moderator",betaTester:"badge-beta",vip:"badge-vip"}).forEach(([e,n])=>{const o=document.getElementById(n);o&&(t[e]?o.classList.remove("d-none"):o.classList.add("d-none"))});const o=document.getElementById("badge-premium");o&&("active"===n?.status||"trialing"===n?.status||!0===n?.active?o.classList.remove("d-none"):o.classList.add("d-none"))}(e)}async function r(){const e=document.getElementById("uid-input"),t=document.getElementById("copy-uid-btn");if(e&&e.value)try{await i.utilities().clipboardCopy(e);const n=t.querySelector(".button-text"),o=n.textContent;n.textContent="Copied!",t.classList.remove("btn-outline-adaptive"),t.classList.add("btn-success"),setTimeout(()=>{n.textContent=o,t.classList.remove("btn-success"),t.classList.add("btn-outline-adaptive")},2e3)}catch(e){console.error("Failed to copy UID:",e)}}}}]);